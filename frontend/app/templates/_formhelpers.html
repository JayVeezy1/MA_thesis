{% macro render_field(field, is_submitted) %}
<div class="{{ kwargs['class'] }}">
    {% if field.errors %}
        {{ field(class='form-control is-invalid') }}
    {% elif is_submitted %}
        {{ field(class='form-control is-valid') }}
    {% else %}
        {{ field(class='form-control') }}
    {% endif %}
    {{ field.label }}
    <div class="invalid-feedback">
        {% for error in field.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    </div>

</div>
{% endmacro %}